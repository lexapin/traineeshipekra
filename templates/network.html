{% extends "index.html" %}

{% block content %}
<div id="mynetwork"></div>
<script type="text/javascript">

    var nodes, edges, network;
    var d = [];
    var k = 0;
    var container = document.getElementById('mynetwork');
    var data = {};
    var options = {
        interaction:{
            multiselect: true
        }
    }

    draw();

    function reset() {
        if (network !== null) {
            nodes = new vis.DataSet();
            edges = new vis.DataSet();
            data = {
                nodes: nodes,
                edges: edges
            };
            network = new vis.Network(container, data, options);
        }
    }

    function addNode() {
        try {
            nodes.add({
                id: document.getElementById('idNode').value,
                label: document.getElementById('labelNode').value
            });
        }
        catch (err) {
            alert(err);
        }
    }

    function updateNode() {
        try {
            nodes.update({
                id: document.getElementById('idNode').value,
                label: document.getElementById('labelNode').value
            });
        }
        catch (err) {
            alert(err);
        }
    }

    function removeNode() {
        try {
            nodes.remove({id: document.getElementById('idNode').value});
        }
        catch (err) {
            alert(err);
        }
    }

    function addEdge() {
        try {
            edges.add({
                id: document.getElementById('idEdge').value,
                from: document.getElementById('fromEdge').value,
                to: document.getElementById('toEdge').value
            });
        }
        catch (err) {
            alert(err);
        }
    }

    function updateEdge() {
        try {
            edges.update({
                id: document.getElementById('idEdge').value,
                from: document.getElementById('fromEdge').value,
                to: document.getElementById('toEdge').value
            });
        }
        catch (err) {
            alert(err);
        }
    }

    function removeEdge() {
        try {
            edges.remove({id: document.getElementById('idEdge').value});
        }
        catch (err) {
            alert(err);
        }
    }

    function draw() {
        data = {};
        nodes = new vis.DataSet([
            {id: 1, label: 'Node 1'},
            {id: 2, label: 'Node 2'},
            {id: 3, label: 'Node 3'},
            {id: 4, label: 'Node 4'},
            {id: 5, label: 'Node 5'},
        ]);
        edges = new vis.DataSet([
            {from: 1, to: 3},
            {from: 1, to: 2},
            {from: 1, to: 5},
            {from: 2, to: 5},
            {from: 2, to: 4},
        ]);
        data = {
            nodes: nodes,
            edges: edges
        };
        network = new vis.Network(container, data, options);
    }

    network.on("selectNode", function (params) {
        if (k == 2)
            k = 0;
        d[k] = params.nodes[0];
        document.getElementById('startData').value = d[0];
        document.getElementById('finishData').value = d[1];
        k++;
    });

</script>
{% endblock %}
